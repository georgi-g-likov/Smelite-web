<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Моят профил (Чирак) | Смелите</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@600;700&family=Montserrat:wght@400;600;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <style>
    .profile-progress {margin-top:32px;}
    .progress-bar-container {background:#eee; border-radius:12px; height:15px; width:100%; overflow:hidden;}
    .progress-bar {background:linear-gradient(90deg, #b57841 20%, #e3b078 80%); height:15px;}
    .progress-label {font-size:1em; color:#b57841; margin-top:5px;}
    .enrolled-course {display:flex;align-items:center;gap:12px; background:#f8f6f2;border-radius:12px;box-shadow:0 1px 7px #ebdfce;margin-bottom:13px; padding:9px 13px;}
    .enrolled-course img {width:58px;height:58px;border-radius:10px;object-fit:cover;}
    .enrolled-course-info {flex:1;}
    .enrolled-course-title {font-weight:600;font-size:1.09em;}
    .enrolled-course-status {background:#dfebd1;color:#6a9334;font-weight:600;padding:3px 10px;border-radius:7px;font-size:0.95em;}
    .enrolled-course-status.finished {background:#ece1e1;color:#98685d;}
    .favorites-list {display:flex;gap:16px;flex-wrap:wrap;margin-top:12px;}
    .favorite-card {background:#f9f6ec; border-radius:9px;padding:7px 11px 7px 7px;display:flex;align-items:center;gap:7px;box-shadow:0 1px 6px #e2dacb;}
    .favorite-card img {width:36px;height:36px;border-radius:50%;object-fit:cover;}
    .profile-header {display:flex;gap:23px;align-items:center;}
    .profile-avatar {width:72px;height:72px;border-radius:50%;object-fit:cover;}
    .profile-info {flex:1;}
    .profile-row {margin-bottom:7px;}
    .profile-desc {margin-top:3px;color:#917a44;font-size:1em;}
    .profile-stats {display:flex;gap:20px;margin:22px 0 18px 0;}
    .profile-stat {text-align:center;}
    .stat-count {font-size:1.15em;font-weight:600;}
    .stat-label {font-size:.97em;color:#b57841;}
    .profile-actions {margin-top:34px;text-align:right;}
    .profile-edit-btn, .profile-password-btn, .profile-logout-btn {background:#eee;color:#7d6229;font-weight:600;border:none;border-radius:8px;padding:7px 19px;margin-left:8px;cursor:pointer;}
    .profile-edit-btn {background:linear-gradient(90deg, #e7b778 30%, #b57841 100%);color:#fff;}
    .profile-logout-btn {background:#ddd;}
    @media (max-width:700px){ .profile-header{flex-direction:column;gap:11px;} }
  </style>
</head>
<body>

<header class="main-header">
  <div class="logo-link">
      <img src="images/smelitebg.svg" alt="СВЖ" class="logo-initials-svg">
      <img src="images/smelitelogo-02.svg" alt="Смелите" class="logo-svg">
  </div>
  
  <nav class="main-nav">
    <ul>
      <li><a href="index.html">Начало</a></li>
      <li><a href="catalog.html">Каталог със занаяти</a></li>
      <li><a href="blog.html">Блог</a></li>
      <li><a href="index.html#contact">СВЪРЖИ СЕ С НАС</a></li>
    </ul>
  </nav>
  <div class="header-actions">
    <a href="shop.html" class="support-btn">
      ПОДКРЕПИ НИ <span class="arrow">→</span>
    </a>
  </div>
</header>

<section class="profile-section">
  <div class="profile-header">
    <img src="images/avatar-default.png" alt="Аватар" class="profile-avatar" id="apprenticeAvatar">
    <div class="profile-info">
      <h2 id="apprenticeName">Стефани Михайлова</h2>
      <span class="profile-role">Чирак</span>
      <span class="profile-username" id="apprenticeUsername">@stefanimi</span>
    </div>
    <button class="profile-edit-btn" onclick="alert('Очаквай редакция на профил скоро!')">Редактирай</button>
  </div>
  
  <div class="profile-details">
    <div class="profile-row"><span>Имейл:</span> <b id="apprenticeEmail">stefi@email.com</b></div>
    <div class="profile-row"><span>Телефон:</span> <b id="apprenticePhone">+359 88 234 8767</b></div>
    <div class="profile-row"><span>Град:</span> <b id="apprenticeCity">Пловдив</b></div>
    <div class="profile-row"><span>Интереси:</span> <b id="apprenticeInterests">Керамика, Тъкачество</b></div>
    <div class="profile-row"><span>Описание:</span>
      <div class="profile-desc" id="apprenticeDesc">
        Млад ентусиаст, който иска да се учи от най-добрите майстори на България!
      </div>
    </div>
  </div>

  <div class="profile-stats" id="profileStats"></div>

  <div class="profile-courses">
    <h3>Моите курсове</h3>
    <div class="enrolled-list" id="enrolledList"></div>
  </div>

  <div class="profile-favorites">
    <h3>Любими майстори</h3>
    <div class="favorites-list">
      <div class="favorite-card">
        <img src="images/avatar-master1.png" alt="">
        <span>Георги Колев</span>
      </div>
      <div class="favorite-card">
        <img src="images/avatar-master2.png" alt="">
        <span>Мария Иванова</span>
      </div>
      <div class="favorite-card">
        <img src="images/avatar-master3.png" alt="">
        <span>Васил Петров</span>
      </div>
    </div>
  </div>

  <div class="profile-progress">
    <h3>Прогрес</h3>
    <div class="progress-bar-container">
      <div class="progress-bar" id="progressBar" style="width: 65%;"></div>
    </div>
    <div class="progress-label" id="progressLabel">65% от планираните обучения за тази година</div>
  </div>

  <div class="profile-actions">
    <button class="profile-password-btn" onclick="alert('Очаквай смяна на парола скоро!')">Смени парола</button>
    <button class="profile-logout-btn" onclick="logout()">Изход</button>
  </div>
</section>
<script>
  // Зареждане на чирашкия профил (user данни)
let user = JSON.parse(localStorage.getItem('apprenticeUser') || '{}');
// Данни за курсове (уроци)
const lessons = JSON.parse(localStorage.getItem('apprenticeLessons') || '[]');

// Профил
document.getElementById('apprenticeName').textContent = user.name || "Стефани Михайлова";
document.getElementById('apprenticeUsername').textContent = user.username ? "@" + user.username : "@stefanimi";
document.getElementById('apprenticeEmail').textContent = user.email || "stefi@email.com";
document.getElementById('apprenticePhone').textContent = user.phone || "+359 88 234 8767";
document.getElementById('apprenticeCity').textContent = user.city || "Пловдив";
document.getElementById('apprenticeInterests').textContent = user.interests || "Керамика, Тъкачество";
document.getElementById('apprenticeDesc').textContent = user.desc || "Млад ентусиаст, който иска да се учи от най-добрите майстори на България!";

// Функция за кликаеми курсове – отваря профила на майстора
function goToLessonDetail(lessonIndex) {
  localStorage.setItem('selectedLessonIndex', lessonIndex);
  window.location.href = 'lesson-detail.html';
}

// Курсове (кликаеми)
const enrolledList = document.getElementById('enrolledList');
if (!lessons.length) {
  enrolledList.innerHTML = '<div style="color:#a58c63; font-size:1.12em;">Все още нямаш записани курсове.<br><br>Разгледай <a href="catalog.html" style="color:#b57841;font-weight:600;">каталога</a> и си запази урок!</div>';
} else {
  enrolledList.innerHTML = '';
lessons.forEach((l, idx) => {
  enrolledList.innerHTML += `
    <div class="enrolled-course" style="cursor:pointer;" onclick="goToLessonDetail(${idx})">
      <img src="${l.image || 'images/woodcarving1.jpg'}" alt="">
      <div class="enrolled-course-info">
        <div class="enrolled-course-title">${l.courseTitle || (l.lessonType === 'group' ? 'Групов урок' : 'Индивидуален урок')}</div>
        <div class="enrolled-course-teacher">Майстор: ${l.master || '-'}</div>
        <div class="enrolled-course-calendar">Дата: ${l.date || '-'}</div>
      </div>
      <span class="enrolled-course-status${l.status === 'завършен' ? ' finished' : ''}">${l.status === 'завършен' ? 'Завършен' : 'Текущ'}</span>
    </div>
  `;
});
}

// Статистики
const stats = {
  total: lessons.length,
  finished: lessons.filter(l => l.status === 'завършен').length,
  favorites: 3 // dummy
};
document.getElementById('profileStats').innerHTML = `
  <div class="profile-stat">
    <div class="stat-count">${stats.total}</div>
    <div class="stat-label">Записани курсове</div>
  </div>
  <div class="profile-stat">
    <div class="stat-count">${stats.finished}</div>
    <div class="stat-label">Завършени</div>
  </div>
  <div class="profile-stat">
    <div class="stat-count">${stats.favorites}</div>
    <div class="stat-label">Любими майстори</div>
  </div>
`;

// Прогрес-бар
let percent = stats.total ? Math.round((stats.finished / stats.total) * 100) : 0;
percent = percent || 5; // за демонстрация, ако е 0
document.getElementById('progressBar').style.width = percent + "%";
document.getElementById('progressLabel').textContent = `${percent}% от планираните обучения за тази година`;

// Logout
function logout() {
  localStorage.removeItem('user');
  window.location.href = "index.html";
}

</script>
</body>
</html>
