<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>–§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–π –ø–æ—Ä—ä—á–∫–∞ | –°–º–µ–ª–∏—Ç–µ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@600;700&family=Montserrat:wght@400;600;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script>
    function renderCart() {
      const cart = JSON.parse(localStorage.getItem('smelite_cart') || '[]');
      const cartList = document.getElementById('cartList');
      const cartCount = document.getElementById('cart-count');
      cartList.innerHTML = '';
      let total = 0;
      cart.forEach((item, i) => {
        const price = parseFloat(item.price.replace('–ª–≤.','').replace('–ª–≤','').replace(',','.')) || 0;
        total += price;
        const li = document.createElement('li');
        li.innerHTML = `
          <img src="${item.img}" class="cart-img">
          <span class="cart-title">${item.title}</span>
          <span class="cart-price">${item.price}</span>
          <button class="remove-btn" onclick="removeFromCart(${i})">&times;</button>
        `;
        cartList.appendChild(li);
      });
      document.getElementById('cartTotal').textContent = '–û–±—â–æ: ' + total.toFixed(2) + ' –ª–≤.';
      cartCount.textContent = cart.length;
      if(cart.length === 0) {
        cartList.innerHTML = '<li style="text-align:center;color:#b05a17;">–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞</li>';
        document.getElementById('cartTotal').textContent = '';
        document.querySelector('.checkout-form').style.display = 'none';
      } else {
        document.querySelector('.checkout-form').style.display = 'block';
      }
    }
    function removeFromCart(i) {
      let cart = JSON.parse(localStorage.getItem('smelite_cart') || '[]');
      cart.splice(i,1);
      localStorage.setItem('smelite_cart', JSON.stringify(cart));
      renderCart();
    }
    function handleCheckoutSubmit(e) {
      e.preventDefault();
      // (dummy) –ò–∑—á–∏—Å—Ç–≤–∞–º–µ –∫–æ–ª–∏—á–∫–∞—Ç–∞
      localStorage.removeItem('smelite_cart');
      renderCart();
      document.querySelector('.checkout-form').style.display = 'none';
      document.querySelector('.checkout-success').style.display = 'block';
    }
    document.addEventListener('DOMContentLoaded', renderCart);
  </script>
</head>
<body>
  <!-- Cart icon in header (optional) -->
  <a href="checkout.html" class="cart-link" style="position:fixed;top:34px;right:48px;z-index:1111;text-decoration:none;">
    <span style="font-size:2rem;vertical-align:middle;">üõí</span>
    <span id="cart-count" style="background:#e67819;color:#fff;font-size:1.05rem;padding:3px 10px;border-radius:16px;margin-left:2px;">0</span>
  </a>
  <section class="checkout-section">
    <h1 class="checkout-title">–§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–π –ø–æ—Ä—ä—á–∫–∞—Ç–∞</h1>
    <ul class="cart-list" id="cartList"></ul>
    <div class="cart-total-row" id="cartTotal"></div>
    <form class="checkout-form" onsubmit="handleCheckoutSubmit(event)">
      <label for="name">–ò–º–µ –∏ —Ñ–∞–º–∏–ª–∏—è:</label>
      <input type="text" id="name" required>
      <label for="email">–ò–º–µ–π–ª:</label>
      <input type="email" id="email" required>
      <label for="phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
      <input type="tel" id="phone" required>
      <label for="address">–ê–¥—Ä–µ—Å –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞:</label>
      <textarea id="address" rows="2" required></textarea>
      <button class="checkout-btn" type="submit">–ü–æ—Ä—ä—á–∞–π</button>
    </form>
    <div class="checkout-success">
      –í–∞—à–∞—Ç–∞ –ø–æ—Ä—ä—á–∫–∞ –µ –ø—Ä–∏–µ—Ç–∞! –©–µ —Å–µ —Å–≤—ä—Ä–∂–µ–º —Å –í–∞—Å –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ.
    </div>
  </section>
</body>
</html>
